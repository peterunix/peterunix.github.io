<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Bspwm With Lembar Panel | Peters Website</title>
<meta property="og:title" content="Bspwm With Lembar Panel | Peters Website" />
<meta name="twitter:title" content="Bspwm With Lembar Panel | Peters Website" />
<meta itemprop="name" content="Bspwm With Lembar Panel | Peters Website" />
<meta name="application-name" content="Bspwm With Lembar Panel | Peters Website" />
<meta property="og:site_name" content="Peter&#39;s blog" />

<meta name="description" content="Random blog posts...some techy and some not">
<meta itemprop="description" content="Random blog posts...some techy and some not" />
<meta property="og:description" content="Random blog posts...some techy and some not" />
<meta name="twitter:description" content="Random blog posts...some techy and some not" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="https://peterunix.github.io/" />
  <meta property="og:image" content="https://peterunix.github.io/" />
  <meta name="twitter:image" content="https://peterunix.github.io/" />
  <meta name="twitter:image:src" content="https://peterunix.github.io/" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2023-07-22T16:18:10-0700 />
    <meta property="article:published_time" content=2023-07-22T16:18:10-0700 />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "Bspwm With Lembar Panel",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2023-07-22",
        "description": "",
        "wordCount":  711 ,
        "mainEntityOfPage": "True",
        "dateModified": "2023-07-22",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "Peters Website"
        }
    }
    </script>


<meta name="generator" content="Hugo 0.115.4">

    

    <link rel="canonical" href="https://peterunix.github.io/posts/bspwm-with-lembar-panel/">
    <link href="/style.min.d16f523c36741e07697791cfe4bcb09b8c92c7034d5cbf85980df65d92a70e97.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="https://peterunix.github.io/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    </head>
<body data-theme = "dark" class="notransition">

<script src="/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://peterunix.github.io/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        Home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/posts/">
                        Posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/pages/about/">
                        About
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Bspwm With Lembar Panel</h1>
                
                
                <div class="post-meta">
                    <time datetime="2023-07-22T16:18:10-07:00" itemprop="datePublished"> 22 Jul 2023 </time>
                </div>
                
            </header>
            <details class="toc">
                <summary><b>Table of Contents</b></summary>
                <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Preface</a>
</li>
<li><a href="#headline-2">Adding XFT support</a>
</li>
<li><a href="#headline-3">The lemonconfig script</a>
</li>
<li><a href="#headline-4">How does it work?</a>
<ul>
<li><a href="#headline-5">Modules</a>
</li>
</ul>
</li>
<li><a href="#headline-6">Image</a>
</li>
</ul>
</nav>
            </details><div class="page-content">
                
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Preface
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>The Arch Wiki doesn&#39;t provide any information on how to get lemonbar
setup with workspace switching, window titles, etc.
Most people have their custom bars run on a timer.
We&#39;re going to do them one better and have our script only update PARTS of our bar when necessary.
This is going make things run much more efficiently and make displaying workspaces possible.
I&#39;m citing these two pages:</p>
<p>
<a href="https://gitlab.com/protesilaos/dotfiles/-/blob/v2.2.0/bin/bin/melonpanel">Protesilaos MelonPanel Config</a></p>
<p>
<a href="https://raw.githubusercontent.com/BrodieRobertson/scripts/master/lemonbar/lemonconfig">Brodie Robertsons Lemonbar Config</a></p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Adding XFT support
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>Lemonbar doesn&#39;t work with glyph fonts, such as the NerdFonts.
Compile this fork of lemonbar to get your fonts working.
This is optional.</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone https://github.com/drscream/lemonbar-xft.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> lemonbar-xft
</span></span><span class="line"><span class="cl">sudo make install</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
The lemonconfig script
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>This is my fork of BrodieRobertson&#39;s lemonbar script.
I&#39;ll explain the nitty gritty of the script at the end of this page</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">#A fork of Brodie Robertsons lemonbar script with ideas taken from Protesilaos&#39; &#34;melonpanel&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#https://gitlab.com/protesilaos/dotfiles/-/blob/v2.2.0/bin/bin/melonpanel</span>
</span></span><span class="line"><span class="cl"><span class="c1">#https://raw.githubusercontent.com/BrodieRobertson/scripts/master/lemonbar/lemonconfig</span>
</span></span><span class="line"><span class="cl"><span class="c1">#https://gitlab.com/protesilaos/lemonbar-xft.git</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#background=&#34;#efefef&#34;</span>
</span></span><span class="line"><span class="cl">_Format<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;%{+u}%{B</span><span class="nv">$background</span><span class="s2">} &#34;</span><span class="nv">$@</span><span class="s2">&#34; %{B}%{-u}&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_Workspaces<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">desktops</span><span class="o">=</span><span class="k">$(</span>bspc query -D --names<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">focused</span><span class="o">=</span><span class="k">$(</span>bspc query -D --names -d focused<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> desktop in <span class="nv">$desktops</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">                <span class="nv">nodes</span><span class="o">=</span><span class="k">$(</span>bspc query -N -d <span class="nv">$desktop</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">[</span> ! -z <span class="s2">&#34;</span><span class="nv">$nodes</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">desktops</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$desktops</span> <span class="p">|</span> sed <span class="s2">&#34;s/</span><span class="nv">$desktop</span><span class="s2">/%{F#f48888}</span><span class="nv">$desktop</span><span class="s2">%{F-}/&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">desktops</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$desktops</span> <span class="p">|</span> sed <span class="s2">&#34;s/</span><span class="nv">$focused</span><span class="s2">/%{B</span><span class="nv">$background</span><span class="s2">}%{+u}_</span><span class="nv">$focused</span><span class="s2">\_%{-u}%{B-}/&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="nv">$desktops</span> <span class="p">|</span> sed <span class="s2">&#34;s/_/ /g&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_WindowName<span class="o">(){</span>
</span></span><span class="line"><span class="cl">        xdotool getwindowfocus getwindowname
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_CurrentWorkspace<span class="o">(){</span>
</span></span><span class="line"><span class="cl">        bspc query -D --names -d
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_Clock<span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">TIME</span><span class="o">=</span><span class="k">$(</span>date <span class="s2">&#34;+%H:%M&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#_Format &#34;${TIME}&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="si">${</span><span class="nv">TIME</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_Battery<span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#_Format $(bat)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="k">$(</span>bat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_Modules<span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> true<span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> <span class="s2">&#34;B: </span><span class="k">$(</span>_Battery<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> <span class="s2">&#34;C: </span><span class="k">$(</span>_Clock<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                sleep 5s
</span></span><span class="line"><span class="cl">        <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">lemonbar_fifo</span><span class="o">=</span><span class="s1">&#39;/tmp/lemonbar.fifo&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> -e <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> rm <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">mkfifo <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_Modules &gt; <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span> <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl">bspc subscribe desktop&gt; <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span> <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl">bspc subscribe node&gt; <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span> <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># This function takes stdin from the fifo file.</span>
</span></span><span class="line"><span class="cl">_Main<span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">wm</span><span class="o">=</span><span class="k">$(</span>_CurrentWorkspace<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="nb">read</span> -r report<span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="nv">$report</span> in
</span></span><span class="line"><span class="cl">                        B*<span class="o">)</span> <span class="nv">batt</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$report</span> <span class="p">|</span> cut -d<span class="s1">&#39;:&#39;</span> -f2-<span class="k">)</span><span class="s2">&#34;</span><span class="p">;;</span>
</span></span><span class="line"><span class="cl">                        C*<span class="o">)</span> <span class="nv">clock</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$report</span> <span class="p">|</span> cut -d<span class="s1">&#39;:&#39;</span> -f2-<span class="k">)</span><span class="s2">&#34;</span><span class="p">;;</span>
</span></span><span class="line"><span class="cl">                        node*<span class="o">)</span> <span class="nv">window_name</span><span class="o">=</span><span class="k">$(</span>_WindowName<span class="k">)</span><span class="p">;;</span>
</span></span><span class="line"><span class="cl">                        desktop*<span class="o">)</span> <span class="nv">wm</span><span class="o">=</span><span class="k">$(</span>_CurrentWorkspace<span class="k">)</span> <span class="nv">window_name</span><span class="o">=</span><span class="k">$(</span>_WindowName<span class="k">)</span><span class="p">;;</span>
</span></span><span class="line"><span class="cl">                <span class="k">esac</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> -e <span class="s2">&#34;%{l} </span><span class="nv">$wm</span><span class="s2"> %{c} </span><span class="nv">$window_name</span><span class="s2"> %{r} </span><span class="nv">$batt</span><span class="s2"> </span><span class="nv">$clock</span><span class="s2"> &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">_Main &lt; <span class="s2">&#34;</span><span class="nv">$lemonbar_fifo</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#end_src</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">* Usage
</span></span><span class="line"><span class="cl">Here<span class="s1">&#39;s a launcher script that I have run with bspwm.
</span></span></span><span class="line"><span class="cl"><span class="s1">#+begin_src shell
</span></span></span><span class="line"><span class="cl"><span class="s1">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="s1">killall -q lemonbar
</span></span></span><span class="line"><span class="cl"><span class="s1">lemonconfig | lemonbar -p \
</span></span></span><span class="line"><span class="cl"><span class="s1">       -f &#39;</span>TerminessTTF Nerd Font Mono:size<span class="o">=</span>13<span class="err">&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>       -g x27</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
How does it work?
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
Modules
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>Each of your modules is just a function that ends outputting plain text.</p>
<p>
The &#34;_Format&#34; module was written by Brodie, and it adds some lemonbar syntax to arguments passed to, allowing for some more stylish modules.</p>
<p>
The &#34;_Format&#34; function isn&#39;t used in my fork, but it&#39;s still included.</p>
<p>
You&#39;ll notice the &#34;_Modules&#34; function echoes out a character and then the output of a module.</p>
<p>
The reason for this is that our loop in &#34;_Main&#34; uses a simple regex to run a particular command if a line contains a specific pattern.</p>
<p>
Adding a letter to the beginning of each line makes parsing the line A LOT simpler.</p>
<p>
**# Fifo file (named pipe)
A named pipe acts the same a traditional pipe, except it stores the stdout into a file which can be used as stdin.</p>
<p>
Every time one of our modules updates, it outputs the content to the named pipe.</p>
<p>
The same goes for bspwm. We output data to the same named pipe whenever we select different nodes or switch desktops.</p>
<p>
The &#34;_Main&#34; function uses a &#34;read&#34; prompt to run a case statement on each line that is sent to the named pipe.</p>
<p>
If the line contains text with the pattern &#34;node*&#34;, the case statement updates the variable &#34;window_name&#34; and echoes out the string to lemonbar</p>
<p>
So if our &#34;_Modules&#34; function hasn&#39;t automatically looped yet, but our current desktop has changed, then the script updates the workspace module and displays the output to the bar. The stored variable data for the other modules remains unchanged.</p>
<p>
**# FYI
The &#34;_Workspaces&#34; function was from BrodieRobertson and it really sucks (no offense).</p>
<p>
I only use &#34;_CurrentWorkspace&#34;. You have to tweak these to match your needs.</p>
<p>
The battery module sources an external script to show my battery
status.</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">#!/bin/sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">batteries=$(find -P /sys/class/power_supply/ | grep -iE &#34;*bat*&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">for battery in $batteries; do
</span></span><span class="line"><span class="cl">       status=$(cat $battery/status)
</span></span><span class="line"><span class="cl">       capacity=$(cat &#34;$battery&#34;/capacity 2&gt;/dev/null || break)
</span></span><span class="line"><span class="cl">       case &#34;$status&#34; in
</span></span><span class="line"><span class="cl">               Discharging) echo &#34;: ${capacity}%&#34; ;;
</span></span><span class="line"><span class="cl">               Full) echo &#34;: ${capacity}%&#34; ;;
</span></span><span class="line"><span class="cl">               Charging) echo &#34;: ${capacity}%&#34; ;;
</span></span><span class="line"><span class="cl">               Unknown) echo &#34;: ${capacity}%&#34;;;
</span></span><span class="line"><span class="cl">       esac
</span></span><span class="line"><span class="cl">done</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
Image
</h2>
<div id="outline-text-headline-6" class="outline-text-2">
<p>Recreated my website from old source and lost my images :p</p>
</div>
</div>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/peterunix" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me"
    title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2023 Peter T.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noreferrer noopener">Hugo blog awesome</a>
        theme on
        <a href="https://gohugo.io" target="_blank" rel="noreferrer noopener">Hugo</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    




    
    
        
    

    
    
        
    



    
    <script src="https://peterunix.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js" integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30&#43;lSNuSkl4QXuNyy8="></script>

    

</body>
</html>
