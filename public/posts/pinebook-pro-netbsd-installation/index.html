<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Pinebook Pro Netbsd Installation | Peters Website</title>
<meta property="og:title" content="Pinebook Pro Netbsd Installation | Peters Website" />
<meta name="twitter:title" content="Pinebook Pro Netbsd Installation | Peters Website" />
<meta itemprop="name" content="Pinebook Pro Netbsd Installation | Peters Website" />
<meta name="application-name" content="Pinebook Pro Netbsd Installation | Peters Website" />
<meta property="og:site_name" content="Peter&#39;s blog" />

<meta name="description" content="Random blog posts...some techy and some not">
<meta itemprop="description" content="Random blog posts...some techy and some not" />
<meta property="og:description" content="Random blog posts...some techy and some not" />
<meta name="twitter:description" content="Random blog posts...some techy and some not" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="https://peterunix.github.io/" />
  <meta property="og:image" content="https://peterunix.github.io/" />
  <meta name="twitter:image" content="https://peterunix.github.io/" />
  <meta name="twitter:image:src" content="https://peterunix.github.io/" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2023-07-22T16:00:37-0700 />
    <meta property="article:published_time" content=2023-07-22T16:00:37-0700 />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "Pinebook Pro Netbsd Installation",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2023-07-22",
        "description": "",
        "wordCount":  382 ,
        "mainEntityOfPage": "True",
        "dateModified": "2023-07-22",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "Peters Website"
        }
    }
    </script>


<meta name="generator" content="Hugo 0.115.4">

    

    <link rel="canonical" href="https://peterunix.github.io/posts/pinebook-pro-netbsd-installation/">
    <link href="/style.min.d16f523c36741e07697791cfe4bcb09b8c92c7034d5cbf85980df65d92a70e97.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="https://peterunix.github.io/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    </head>
<body data-theme = "dark" class="notransition">

<script src="/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://peterunix.github.io/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        Home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/posts/">
                        Posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/pages/about/">
                        About
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Pinebook Pro Netbsd Installation</h1>
                
                
                <div class="post-meta">
                    <time datetime="2023-07-22T16:00:37-07:00" itemprop="datePublished"> 22 Jul 2023 </time>
                </div>
                
            </header>
            <details class="toc">
                <summary><b>Table of Contents</b></summary>
                <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Preface</a>
</li>
<li><a href="#headline-2">Configuring Network</a>
</li>
<li><a href="#headline-3">Configuring package manager</a>
</li>
<li><a href="#headline-4">Installing a desktop enviroment</a>
</li>
</ul>
</nav>
            </details><div class="page-content">
                
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Preface
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>I&#39;m going to assume that you&#39;ve already copied the <a href="https://wiki.pine64.org/index.php/Pinebook_Pro_Software_Release#NetBSD_.5BmicroSD_.2FeMMC_Boot.5D">netbsd</a> image to
your device and have booted into your system. If you have problems
booting from the microsd card, try disabling the emmc chip. It used to
be the case that you were only able to boot from microsd if the chip
was disabled. I&#39;m not sure if this was fixed.</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Configuring Network
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>
There are two ways of doing this:</p>
<ol>
<li>Manually configuring wpa_supplicant</li>
<li>Using wpa_cli (frontend to wpa_supplicant)</li>
</ol>
<p>We&#39;re going to go over the manual method of setting up the network.
If you want to use wpa_cli, here&#39;s a <a href="https://wiki.archlinux.org/index.php/Wpa_supplicant#Connecting_with_wpa_cli">link</a> to the arch wiki page</p>
<p>
Let&#39;s identify our interface</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ifconfig
</span></span><span class="line"><span class="cl">&gt; lo0 flags....
</span></span><span class="line"><span class="cl">&gt; run0: flags..... &lt;---- Substitute this interface <span class="k">for</span> yours when referenced</span></span></code></pre></div>
</div>
<p>
Next we setup wpa_supplicant and dhcpcd to run at boot.</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ vi /etc/rc.conf
</span></span><span class="line"><span class="cl"><span class="c1">#Append the following</span>
</span></span><span class="line"><span class="cl"><span class="nv">dhcpcd</span><span class="o">=</span>YES
</span></span><span class="line"><span class="cl"><span class="nv">dhcpcd_flags</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">dhcpcd_flags</span><span class="si">}</span><span class="s2"> -b&#34;</span>  <span class="c1">#This ensures boot wont hang when network isn&#39;t present</span>
</span></span><span class="line"><span class="cl"><span class="nv">wpa_supplicant</span><span class="o">=</span>YES
</span></span><span class="line"><span class="cl"><span class="nv">wpa_supplicant_flags</span><span class="o">=</span><span class="s2">&#34;-B -i run0 -c /etc/wpa_supplicant.conf&#34;</span></span></span></code></pre></div>
</div>
<p>
Next we can add our network to /etc/wpa_supplicant.conf</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ vi /etc/wpa_supplicant.conf
</span></span><span class="line"><span class="cl"><span class="nv">ctrl_interface</span><span class="o">=</span>/var/run/wpa_supplicant
</span></span><span class="line"><span class="cl"><span class="nv">ctrl_interface_group</span><span class="o">=</span>wheel
</span></span><span class="line"><span class="cl"><span class="nv">update_config</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">network</span><span class="o">={</span>
</span></span><span class="line"><span class="cl">        <span class="nv">ssid</span><span class="o">=</span><span class="s2">&#34;my favourite network&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">psk</span><span class="o">=</span><span class="s2">&#34;hunter2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Starting wpa_supplicant</span>
</span></span><span class="line"><span class="cl">/etc/rc.d/wpa_supplicant start</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Configuring package manager
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>Netbsd has a commented URL for downloading binary packages in
~/.profile. Let&#39;s uncomment it</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ vi ~/.profile
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PKG_PATH</span><span class="o">=</span><span class="s2">&#34;https://...&#34;</span></span></span></code></pre></div>
</div>
<p>
I believe at this point you have to log out and log back in, so the .profile is sourced again.
I just gave it a reboot instead. Let&#39;s install the &#34;pkgin&#34; package manager now.</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pkg_add -v pkgin
</span></span><span class="line"><span class="cl">pkgin update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s2">&#34;Warning earm doesn&#39;t match your current architecture....&#34;</span>
</span></span><span class="line"><span class="cl">Still want to proceed? <span class="o">[</span>y/N<span class="o">]</span></span></span></code></pre></div>
</div>
<p>
Stop here. We have to make sure our architecture is set correctly, or else packages won&#39;t install properly.
Fortunatley this is pretty simple.</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Note how I overwrote the file.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># If you choose to instead append the text, make sure you edit repositories.conf to delete the original url</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="nv">$PKG_PATH</span> &gt; /usr/pkg/etc/pkgin/repositories.conf</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
Installing a desktop enviroment
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pkgin install xfce4 xinit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># We have to link our X system so xinit can read from it.</span>
</span></span><span class="line"><span class="cl">ln -s /usr/X11R7/bin/X /usr/pkg/bin/X
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># We add xfce4-session to our .xinitrc</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;exec xfce4-session&#34;</span> &gt; ~/.xinitrc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Finally we can boot into our desktop enviroment</span>
</span></span><span class="line"><span class="cl">startx</span></span></code></pre></div>
</div>
<p>
Give XFCE4 a moment to load in.
Alt+f1 will bring you back to the tty prompt.
Alt+f2 will bring you to the gui</p>
</div>
</div>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/peterunix" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me"
    title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2023 Peter T.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noreferrer noopener">Hugo blog awesome</a>
        theme on
        <a href="https://gohugo.io" target="_blank" rel="noreferrer noopener">Hugo</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    




    
    
        
    

    
    
        
    



    
    <script src="https://peterunix.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js" integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30&#43;lSNuSkl4QXuNyy8="></script>

    

</body>
</html>
