<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <title>Queztaz/Corebooting Thinkpad X220 With CH341A Programmer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/gtd.css">
  
  
</head>
<body>
  
<main>
  <div style="margin: 1rem;">
    <a href="/" style="
      display: inline-block;
      background-color: #eee;
      color: #333;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      font-family: sans-serif;
      font-size: 0.9rem;
    ">
      ‚Üê Homepage
    </a>

  <h1>Corebooting Thinkpad X220 With CH341A Programmer</h1>

  </div>
  <nav class="toc">
    <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Summary of page</a>
</li>
<li><a href="#headline-2">Step 1 - Buy the flasher</a>
</li>
<li><a href="#headline-3">Step 2 - Install the Drivers</a>
</li>
<li><a href="#headline-4">Step 3 - Connecting to the BIOS</a>
</li>
<li><a href="#headline-5">Step 4 - Installing Coreboot</a>
</li>
<li><a href="#headline-6">Image of original BIOS </a>
</li>
</ul>
</nav>
  </nav> 

  <article>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Summary of page
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>This isn&#39;t going to be a walkthrough of corebooting your Thinkpad X220. These
are the steps you need to get the flasher working and connected to your system</p>
<p>
<strong>Fyi: My host system is Windows 11 and a virtual machine with USB redirection</strong>
<strong>was used to flash the system</strong></p>
<p>
<strong>I exported the factory default ROMS to my PC</strong></p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Step 1 - Buy the flasher
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>I purchased the following CH341A programmer with the clip from Amazon. If you
google this online, some people will report that the clip fried there chip
because it runs at 5volts instead of 3.3v. I read some post online debunking
this. The chip will start at 5volts and then move to 3.3v. The user reported
that the fried chips were likely caused by improper placement of the clip.</p>
<p>
This clip worked fine</p>
<p>
<a href="https://www.amazon.com/dp/B07SHSL9X9">KeeYees SOP8 SOIC8 Test Clip and CH341A USB Programmer Flash for Most of 24 25
Series BIOS Chip with PDF Tutorial</a></p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Step 2 - Install the Drivers
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>I&#39;m running this on Windows 11 and using a virtualbox to do the flashing. I
installed these drivers on the host machine and then installed &#34;AsProgrammer&#34; to
test if the connection between the programmer and the bios was working.</p>
<p>
Driver: <a href="https://github.com/KrisKasprzak/CH341/">https://github.com/KrisKasprzak/CH341/</a>
AsProgrammer: <a href="https://github.com/nofeletru/UsbAsp-flash/">https://github.com/nofeletru/UsbAsp-flash/</a></p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
Step 3 - Connecting to the BIOS
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>With the driver installed, I opened ASProgrammer and had it attempt to read the
data from the BIOS. I was getting an error saying &#34;Check Settings&#34;. This was
because the clip wasn&#39;t properly seated on the bios chip.</p>
<p>
Here are the images of how I have things connected. Make sure the positioning of
the red cable matches below. This will be the exact setup you need to flash the
BIOS. Check your hardware connections and even </p>
<p>
<a href="./12Fz.gpg">./12Fz.gpg</a></p>
<p>
<img src="./6PIP.jpg" alt="./6PIP.jpg" title="./6PIP.jpg" /></p>
<p>
<img src="3vEa.jpg" alt="3vEa.jpg" title="3vEa.jpg" /></p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
Step 4 - Installing Coreboot
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>I followed Bryce&#39;s guide for the rest. The only important thing I did was
install &#34;flashrom&#34; from the Ubuntu Repos. I didn&#39;t bother figuring out how to
compile flashrom with support for the CH341A. It worked great. I did see that I
had two different chips to flash from. I chose the one with the longer name
(&#34;w25q64bv-w25q64cv-w25q64fv&#34;). I don&#39;t think it would have made a difference
since reading both flash chips had the same filehash.</p>
<p>
I used the github repo from nenadstoisavljevic and copied the bootsplash image
and any settings in the configuration of coreboot. The only thing I didn&#39;t copy
from that github repo were all the additional payloads that were selected.</p>
<p>
https://brycevandegrift.xyz/blog/corebooting-a-thinkpad-x220/</p>
<p>
https://github.com/nenadstoisavljevic/x220-coreboot-guide</p>
<p>
My flashing failed once because the virtual machine was freaking out. I reset
the system and reseated the USB (leaving the clip untouched). It worked after : )</p>
<p>
<img src="./VWip.jpg" alt="./VWip.jpg" title="./VWip.jpg" /></p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
Image of original BIOS 
</h2>
<div id="outline-text-headline-6" class="outline-text-2">
<p>View my github below with the original BIOS images I took prior to corebooting.</p>
<p>
https://github.com/peterunix/ThinkpadX220BIOS</p>
</div>
</div>

  </article>
</main>

</body>
</html>
