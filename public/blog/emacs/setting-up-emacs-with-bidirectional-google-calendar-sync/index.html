<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <title>Setting Up Emacs With Bidirectional Google Calendar Sync</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/gtd.css">
  
  
</head>
<body>
  
<main>
  <div style="margin: 1rem;">
    <a href="/" style="
      display: inline-block;
      background-color: #eee;
      color: #333;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      font-family: sans-serif;
      font-size: 0.9rem;
    ">
      ‚Üê Homepage
    </a>

  <h1>Setting Up Emacs With Bidirectional Google Calendar Sync</h1>

  </div>
  <nav class="toc">
    <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Synopsis</a>
</li>
<li><a href="#headline-2">Creating the Google App</a>
</li>
<li><a href="#headline-3">Locating Calendar ID</a>
</li>
<li><a href="#headline-4">Adding org-gcal to Emacs</a>
</li>
<li><a href="#headline-5">Syncing Your Calendar</a>
</li>
<li><a href="#headline-6">Automatically Sync Calendar</a>
</li>
<li><a href="#headline-7">Org Capture Template</a>
</li>
<li><a href="#headline-8">Troubleshooting</a>
</li>
</ul>
</nav>
  </nav> 

  <article>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Synopsis
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>This guide will use Emacs 30 (optionally) and <a href="https://github.com/kidd/org-gcal.el/">org-gcal by Kidd</a> to setup
bidirectional calendar syncing between your org agenda and google.</p>
<p>
I&#39;m using the following Emacs app image: <a href="https://github.com/blahgeek/emacs-appimage/releases/tag/github-action-build-12425294048">LINK</a></p>
<p>
Overview of steps:</p>
<ul>
<li>Create a new app on the Google Developer Console</li>
<li>Install org-gcal from straight</li>
<li>Add your API keys</li>
<li>Sync Calendar</li>
</ul>
<p>The guide on the Kidd&#39;s README is incredibly detailed. I&#39;ll be copying most of it and
including the solutions that left me with a working system.</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Creating the Google App
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<ul>
<li>Navigate to: <a href="https://console.cloud.google.com/cloud-resource-manager">https://console.cloud.google.com/cloud-resource-manager</a></li>
<li>Create a new project named &#34;Emacs G-CAL&#34;</li>
<li>Click on the top left hamburger menu</li>
<li>Select &#34;API &amp; Services&gt;OAuth Consent Screen&#34;</li>
</ul>
<p>Create an external app</p>
<p>
<img src="./Nb2G.png" alt="./Nb2G.png" title="./Nb2G.png" /></p>
<p>
Give it a name such as &#34;Emacs G-CAL&#34;. The rest of the settings can be left as
default. <strong>Add your email address as a test user before completing the setup</strong>.</p>
<p>
<img src="./vsip.png" alt="./vsip.png" title="./vsip.png" /></p>
<p>
<img src="./c10H.png" alt="./c10H.png" title="./c10H.png" /></p>
<p>
<img src="./yZgB.png" alt="./yZgB.png" title="./yZgB.png" /></p>
<p>
<img src="./pkMF.png" alt="./pkMF.png" title="./pkMF.png" /></p>
<p>
Next create the API credentials</p>
<ul>
<li>Click on Credentials&gt;Create Credentials&gt;Create OAuth Client ID</li>
</ul>
<p><img src="./y8BS.png" alt="./y8BS.png" title="./y8BS.png" /></p>
<p>
Application type is desktop. Copy your client ID and client secret to a text
file.after completing this step.</p>
<p>
<img src="./ebd4.png" alt="./ebd4.png" title="./ebd4.png" /></p>
<p>
The last step is to enable the Google Calendar API for the project</p>
<ul>
<li>Click on Enabled API and Services</li>
<li>Click on Enable API</li>
<li>Scroll down to &#34;Google Calendar&#34; and enable it</li>
</ul>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Locating Calendar ID
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>Your Google calendar ID will be a set in a variable when installing org-gcal in
Emacs. This is how to find it and please write it down.</p>
<p>
Navigate to your google calendar settings and scroll down to the
integration/sharing settings. There will be links to the ISC calendars for
sharing, as well as a section that says <strong>Calendar ID</strong></p>
<p>
For Gmail Personal accounts at least, the <strong>Calendar ID</strong> will be your email address
address. Write down your <strong>Calendar ID</strong></p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
Adding org-gcal to Emacs
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>
I&#39;m using straight.el to install org-gcal. This is my package management code
block for reference.</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span><span style="color:#75715e">;; Package manager setup</span>
</span></span><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;package</span>)
</span></span><span style="display:flex;"><span>(setq package-enable-at-startup <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>(setq package-check-signature <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>(setq package-archives <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;melpa&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;https://melpa.org/packages/&#34;</span>)
</span></span><span style="display:flex;"><span>                         (<span style="color:#e6db74">&#34;org&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;https://orgmode.org/elpa/&#34;</span>)
</span></span><span style="display:flex;"><span>                         (<span style="color:#e6db74">&#34;elpa&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;https://elpa.gnu.org/packages/&#34;</span>)
</span></span><span style="display:flex;"><span>                         (<span style="color:#e6db74">&#34;gnu&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;https://elpa.gnu.org/packages/&#34;</span>) ))
</span></span><span style="display:flex;"><span>(package-initialize)
</span></span><span style="display:flex;"><span>(unless package-archive-contents
</span></span><span style="display:flex;"><span>    (package-refresh-contents))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Package manager. Install Straight.el</span>
</span></span><span style="display:flex;"><span>(defvar bootstrap-version)
</span></span><span style="display:flex;"><span>(let ((bootstrap-file
</span></span><span style="display:flex;"><span>       (<span style="color:#a6e22e">expand-file-name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;straight/repos/straight.el/bootstrap.el&#34;</span>
</span></span><span style="display:flex;"><span>        (or (bound-and-true-p straight-base-dir)
</span></span><span style="display:flex;"><span>            user-emacs-directory)))
</span></span><span style="display:flex;"><span>      (bootstrap-version <span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>  (unless (<span style="color:#a6e22e">file-exists-p</span> bootstrap-file)
</span></span><span style="display:flex;"><span>    (with-current-buffer
</span></span><span style="display:flex;"><span>        (url-retrieve-synchronously
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/radian-software/straight.el/develop/install.el&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#39;silent</span> <span style="color:#e6db74">&#39;inhibit-cookies</span>)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">goto-char</span> (<span style="color:#a6e22e">point-max</span>))
</span></span><span style="display:flex;"><span>      (eval-print-last-sexp)))
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">load</span> bootstrap-file <span style="color:#66d9ef">nil</span> <span style="color:#e6db74">&#39;nomessage</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Package manager. Install use-package with straight.el</span>
</span></span><span style="display:flex;"><span>(straight-use-package <span style="color:#e6db74">&#39;use-package</span>)
</span></span><span style="display:flex;"><span>(setq straight-use-package-by-default <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>(setf use-package-always-ensure <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Package Manager. Install quelpa using use-package</span>
</span></span><span style="display:flex;"><span>(use-package quelpa-use-package
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :pin melpa
</span></span><span style="display:flex;"><span>  :init
</span></span><span style="display:flex;"><span>  (setq quelpa-update-melpa-p <span style="color:#66d9ef">nil</span>))</span></span></code></pre></div>
</div>
<p>
This is the official way of installing org-gcal. For the rest of this guide,
I&#39;ll be using a slightly modified version that provides basic security for
storing the API Keys. Please acknowledge this code block, but don&#39;t use it if
you&#39;re following along.</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> THIS IS ONLY A WORKING EXAMPLE. KEEP READING PAGE
</span></span><span style="display:flex;"><span>  (use-package org-gcal
</span></span><span style="display:flex;"><span>    :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>    :config
</span></span><span style="display:flex;"><span>    (require <span style="color:#e6db74">&#39;org-gcal</span>)
</span></span><span style="display:flex;"><span>    (require <span style="color:#e6db74">&#39;plstore</span>)
</span></span><span style="display:flex;"><span>    (setq plstore-cache-passphrase-for-symmetric-encryption <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>    (setq org-gcal-client-id <span style="color:#e6db74">&#34;YOUR_CLIENT_ID&#34;</span>
</span></span><span style="display:flex;"><span>          org-gcal-client-secret <span style="color:#e6db74">&#34;YOUR_CLIENT_SECRET&#34;</span>
</span></span><span style="display:flex;"><span>          org-gcal-fetch-file-alist <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;YOUR_CALENDAR_ID&#34;</span> <span style="color:#f92672">.</span>  <span style="color:#e6db74">&#34;~/.emacs.d/calendar.org&#34;</span>)))
</span></span><span style="display:flex;"><span>    (org-gcal-reload-client-id-secret)
</span></span><span style="display:flex;"><span>    )</span></span></code></pre></div>
</div>
<p>
Org-gcal relies on using plstore which stores key value pairs in an encrypted
file using GPG. The purpose of the plstore is to read the <code>org-gcal-client-id</code> and
<code>org-gcal-client-secret</code>, and then use an oauth2.0 library to request the xoauth2.0
token. The token is then encrypted in a file located in
<code>$HOME/.emacs.d/oauth2-auto.plist</code>. Anytime you sync your calendar, that file will
be decrypted and used for authentication.</p>
<p>
I&#39;ll start with creating a passwordless GPG keypair. This is required by my
email client. You don&#39;t strictly need a passwordless key pair. <code>Pass</code> is used to
store the client ID and secret keys in encrypted files. In my init.el, I&#39;ll tell
emacs to decrypt the files for the variables. Additionally, I&#39;ll tell plstore to
encrypt using my key-pair instead of using symmetric encryption. This avoids
hard coded API keys and password prompts when syncing.</p>
<p>
Start with creating the GPG key pair and then encrypting your Client ID and
Client Secret ID. These encrypted files will automatically be stored in <code>$HOME/.password-store/g-cal/</code></p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt install pass
</span></span><span style="display:flex;"><span>gpg --batch --passphrase <span style="color:#e6db74">&#39;&#39;</span> --quick-gen-key proton@proton.local default default
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pass init proton@proton.local
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pass insert g-cal/clientid
</span></span><span style="display:flex;"><span>&lt;PASTE Client ID Here&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pass insert g-cal/clientsecret
</span></span><span style="display:flex;"><span>&lt;PASTE Client Secret ID Here&gt;</span></span></code></pre></div>
</div>
<p>
Now use this code snippet to install GCal.:</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>  (use-package org-gcal
</span></span><span style="display:flex;"><span>    :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>    :config
</span></span><span style="display:flex;"><span>    (require <span style="color:#e6db74">&#39;org-gcal</span>)
</span></span><span style="display:flex;"><span>    (require <span style="color:#e6db74">&#39;plstore</span>)
</span></span><span style="display:flex;"><span>    (setq plstore-cache-passphrase-for-symmetric-encryption <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>    (setq org-gcal-client-id (string-trim (shell-command-to-string <span style="color:#e6db74">&#34;pass g-cal/clientid&#34;</span>))
</span></span><span style="display:flex;"><span>          org-gcal-client-secret (string-trim (shell-command-to-string <span style="color:#e6db74">&#34;pass g-cal/clientsecret&#34;</span>))
</span></span><span style="display:flex;"><span>          org-gcal-fetch-file-alist <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;YOUR_CALENDAR_ID&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/.emacs.d/calendar.org&#34;</span>)))
</span></span><span style="display:flex;"><span>    (setq plstore-encrypt-to <span style="color:#e6db74">&#34;proton@proton.local&#34;</span>)
</span></span><span style="display:flex;"><span>    (org-gcal-reload-client-id-secret)
</span></span><span style="display:flex;"><span>    )</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
Syncing Your Calendar
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>This part can be tedious. I&#39;ll include steps for troubleshooting.</p>
<p>
Firstly, ensure your org agenda files are set.</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>(setq org-agenda-files &#39;(&#34;~/.emacs.d/calendar.org&#34;))
</span></span><span style="display:flex;"><span>(setq org-default-agenda-file &#34;~/.emacs.d/calendar.org&#34;)</span></span></code></pre></div>
</div>
<p>
Now create the <code>$HOME/.emacs.d/oauth2-auto.plist</code> file. For an unknown reason,
the plstore module will fail to create the encrypted oauth2-auto.plist file
unless it already exists. Create this file manually before attempting the g-cal
sync/google sign in window:</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>touch $HOME/.emacs.d/oauth2-auto.plist</span></span></code></pre></div>
</div>
<p>
Open Emacs and run the following command</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># If the sync ever fails, run this before attempting to resync
</span></span><span style="display:flex;"><span>M-x org-gcal--sync-unlock
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>M-x org-gcal-sync</span></span></code></pre></div>
</div>
<p>
This will attempt to open your default web browser. Complete the &#34;sign in with
google&#34; consent screen and close the window. Emacs will retrieve the xoauth2.0
token after closing the window, then encrypt it into that file.</p>
<p>
<strong>If you have a prompt requesting to kill the xoauth2.0 buffer, click &#34;Save and
 kill buffer&#34;</strong>.</p>
<p>
Run the sync again. This time it should should download your email events into
your agenda/calendar file.</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>M-x org-gcal-sync</span></span></code></pre></div>
</div>
<p>
Your calendar should be synced at this point!</p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
Automatically Sync Calendar
</h2>
<div id="outline-text-headline-6" class="outline-text-2">
<p>
This code will automatically sync the calendar bi-directionally with Google
every 30 seconds. Minibuffer dialog will be suppressed</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(defun make-silent (func <span style="color:#66d9ef">&amp;rest</span> args) (cl-letf (((<span style="color:#a6e22e">symbol-function</span> <span style="color:#e6db74">&#39;message</span>) (lambda (<span style="color:#66d9ef">&amp;rest</span> args) <span style="color:#66d9ef">nil</span>))) (<span style="color:#a6e22e">apply</span> func args))) <span style="color:#75715e">; Silently run other functions.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package org-gcal <span style="color:#75715e">; Installing org-gcal and configuring</span>
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (setq plstore-cache-passphrase-for-symmetric-encryption <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  (setq org-gcal-client-id (string-trim (shell-command-to-string <span style="color:#e6db74">&#34;pass g-cal/clientid&#34;</span>)))
</span></span><span style="display:flex;"><span>  (setq org-gcal-client-secret (string-trim (shell-command-to-string <span style="color:#e6db74">&#34;pass g-cal/clientsecret&#34;</span>)))
</span></span><span style="display:flex;"><span>  (setq org-gcal-fetch-file-alist <span style="color:#f92672">`</span>((<span style="color:#e6db74">&#34;email@gmail.com&#34;</span> <span style="color:#f92672">.</span> <span style="color:#f92672">,</span>(<span style="color:#a6e22e">expand-file-name</span> <span style="color:#e6db74">&#34;calendar.org&#34;</span> user-emacs-directory))))
</span></span><span style="display:flex;"><span>  (setq plstore-encrypt-to <span style="color:#e6db74">&#34;proton@proton.local&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun my-org-gcal-sync-clear-token ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Sync calendar, clearing tokens first.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (require <span style="color:#e6db74">&#39;org-gcal</span>)
</span></span><span style="display:flex;"><span>  (when org-gcal--sync-lock
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; Avoids displaying the org-sync-lock error</span>
</span></span><span style="display:flex;"><span>    (org-gcal--sync-unlock))
</span></span><span style="display:flex;"><span>  (org-gcal-reload-client-id-secret)
</span></span><span style="display:flex;"><span>  (org-gcal-sync-tokens-clear)
</span></span><span style="display:flex;"><span>  (org-gcal-sync))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">; Make the g-cal sync function silent</span>
</span></span><span style="display:flex;"><span>(advice-add <span style="color:#e6db74">&#39;my-org-gcal-sync-clear-token</span> :around <span style="color:#a6e22e">#&#39;</span>make-silent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">; Only attempt automatic sync if the OATH2 credential file exists.</span>
</span></span><span style="display:flex;"><span>(when (<span style="color:#a6e22e">file-exists-p</span> (<span style="color:#a6e22e">expand-file-name</span> <span style="color:#e6db74">&#34;oauth2-auto.plist&#34;</span> user-emacs-directory))
</span></span><span style="display:flex;"><span>  (org-gcal-reload-client-id-secret) <span style="color:#75715e">; Reload the client and secret ID variables</span>
</span></span><span style="display:flex;"><span>  (run-at-time <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">30</span> <span style="color:#a6e22e">#&#39;</span>my-org-gcal-sync-clear-token) <span style="color:#75715e">; Run the sync</span>
</span></span><span style="display:flex;"><span>  )</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-7" class="outline-2">
<h2 id="headline-7">
Org Capture Template
</h2>
<div id="outline-text-headline-7" class="outline-text-2">
<p>
Per the README, this is the official way to use org capture. I learned its
easiest to write dates in the format &#34;Jan 1 23:00&#34; when scheduling items. Read
the documentation for any information on how the application works.</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>  (setq org-capture-templates
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">`</span>((<span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#e6db74">&#34;Appointment&#34;</span> entry (file <span style="color:#f92672">,</span>(<span style="color:#a6e22e">concat</span> user-emacs-directory <span style="color:#e6db74">&#34;/calendar.org&#34;</span>))
</span></span><span style="display:flex;"><span>           <span style="color:#e6db74">&#34;* %?\n:PROPERTIES:\n:calendar-id:\tpeteruxfdm@gmail.com\n:END:\n:org-gcal:\n%^T--%^T\n:END:\n\n&#34;</span> :jump-to-captured <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#e6db74">&#34;j&#34;</span> <span style="color:#e6db74">&#34;Journal&#34;</span> entry (file org-default-journal-file)
</span></span><span style="display:flex;"><span>           <span style="color:#e6db74">&#34;** %? %U\n\n&#34;</span>
</span></span><span style="display:flex;"><span>           :empty-lines <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>          ))</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-8" class="outline-2">
<h2 id="headline-8">
Troubleshooting
</h2>
<div id="outline-text-headline-8" class="outline-text-2">
<p>Scenario: The sync is completing without error though no calendar events are populating.</p>
<p>
Solution: Create a new calendar event item first and see if that syncs. My
calendar took a while to retrieve future and past events. I was under the
impression that only new calendar event items would appear. All of your events
will appear, though sometimes it can take a moment.</p>
<p>
If the sync fails, run these commands and try again. This is also applicable to
if you receive an oauth provider error. Running the reload command will fix
that as well:</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>M-x (org-gcal-reload-client-id-secret)
</span></span><span style="display:flex;"><span>M-x (org-gcal--sync-unlock)
</span></span><span style="display:flex;"><span>M-x (org-gcal-sync)</span></span></code></pre></div>
</div>
<p>
Scenario: Sync failing in general</p>
<p>
Solution: It could be that your API credentials are incorrect Try steps above
after confirming the credentials are correct. Double check that your
oauth2-auto.plist file in the emacs-user-directory contains data. This should
contain encrypted PGP data. If it doesn&#39;t, read your emacs error logs and enable
org-gcal-toggle-debugging. This will indicate whether its an issue creating the
file or with the API server.</p>
<p>
I have tried clicking on &#34;<code>yes</code>&#34;, &#34;<code>no</code>&#34;, and &#34;<code>save then kill</code>&#34; when first running
<code>org-gcal-sync</code> and receiving the <code>oauth2-auto.plist</code> buffer message. I believe if
you click &#34;save then kill&#34;, it will properly save the PGP encrypted file that
emacs creates.</p>
<p>
If the file contains valid PGP data and the message buffer says its getting
decrypted, its another problem with either the API or the sync being
delayed. Please try creating new calendar event items specifically when
troubleshooting.</p>
<p>
The steps above should &#34;just work&#34;. Additional issues would need individual
troubleshooting.</p>
</div>
</div>

  </article>
</main>

</body>
</html>
