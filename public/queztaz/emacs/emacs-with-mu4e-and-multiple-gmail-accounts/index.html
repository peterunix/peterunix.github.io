<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/gtd.css">
  <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
  
  
</head>
<body>
  
<main>
  <div style="margin: 1rem;">
    <a href="/" style="
      display: inline-block;
      background-color: #eee;
      color: #333;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      font-family: sans-serif;
      font-size: 0.9rem;
    ">
      ‚Üê Homepage
    </a>

  <title>queztaz/Emacs with Mu4e and Multiple Gmail Accounts</title>
  <h1>Emacs with Mu4e and Multiple Gmail Accounts</h1>

  </div>
  <nav class="toc">
    <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Emacs with Mu4e and Multiple Gmail Accounts</a>
<ul>
<li><a href="#headline-2">Preamble</a>
</li>
</ul>
</li>
<li><a href="#headline-3">Installation</a>
<ul>
<li><a href="#headline-4">Gmail</a>
<ul>
<li><a href="#headline-5">Creating a Gmail App Password</a>
</li>
</ul>
</li>
<li><a href="#headline-6">Compile Mu4e</a>
<ul>
<li><a href="#headline-7">Dependencies</a>
</li>
<li><a href="#headline-8">Compiling Mu4e</a>
</li>
<li><a href="#headline-9">GPG Keys (Encrypting Password)</a>
</li>
</ul>
</li>
<li><a href="#headline-10">Offline Imap (Downloading Emails) </a>
<ul>
<li><a href="#headline-11">Create Email Folder</a>
</li>
<li><a href="#headline-12">Create password decrypting script</a>
</li>
<li><a href="#headline-13">Create main configuration file</a>
</li>
<li><a href="#headline-14">Downloading and Indexing Emails</a>
</li>
</ul>
</li>
<li><a href="#headline-15">Configuring Emacs</a>
<ul>
<li><a href="#headline-16">Basic Config</a>
</li>
<li><a href="#headline-17">Creating .authinfo.gpg file</a>
</li>
<li><a href="#headline-18">Using Mu4e</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
  </nav> 

  <article>
    
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Emacs with Mu4e and Multiple Gmail Accounts
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
Preamble
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>Documented steps I take to setup Mu4e with two Gmail accounts. This page will
contain the directions for using app password authentication. It will be updated
when XOAUTH2.0 is required.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Installation
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<div id="outline-container-headline-4" class="outline-3">
<h3 id="headline-4">
Gmail
</h3>
<div id="outline-text-headline-4" class="outline-text-3">
<p>I&#39;m using app passwords while they still last. Eventually this section will
contain information on setting up XOAUTH 2.0 when app passwords are fully phased
out.</p>
<p>
Two email accounts will be added to Mu4e. Each account will have its own
&#34;context&#34; and account dependent keybindings.</p>
<div id="outline-container-headline-5" class="outline-4">
<h4 id="headline-5">
Creating a Gmail App Password
</h4>
<div id="outline-text-headline-5" class="outline-text-4">
<ul>
<li>Open the Gmail account settings</li>
<li>Enable two factor authentication</li>
<li>Create your app password using <a href="https://myaccount.google.com/apppasswords">https://myaccount.google.com/apppasswords</a></li>
</ul>
<p>The app password will be used by offlineimap to sign into your Gmail
account. Create app passwords for both your email accounts.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Compile Mu4e
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>
The application will be compiled from source</p>
<div id="outline-container-headline-7" class="outline-4">
<h4 id="headline-7">
Dependencies
</h4>
<div id="outline-text-headline-7" class="outline-text-4">
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install -y git meson libgmime-3.0-dev libxapian-dev gnutls-bin texinfo libcld2-dev cmake guile-3.0</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-8" class="outline-4">
<h4 id="headline-8">
Compiling Mu4e
</h4>
<div id="outline-text-headline-8" class="outline-text-4">
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p ~/Sources
</span></span><span style="display:flex;"><span>git clone https://github.com/emacsmirror/mu4e ~/Sources/mu4e
</span></span><span style="display:flex;"><span>cd ~/Sources/mu4e
</span></span><span style="display:flex;"><span>./autogen.sh
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>sudo make install</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-9" class="outline-4">
<h4 id="headline-9">
GPG Keys (Encrypting Password)
</h4>
<div id="outline-text-headline-9" class="outline-text-4">
<p>
Generate your own GPG pair. This will be used to decrypt your password by
offlineimap. Please use the full-key-gen flag instead of following the example
below. I&#39;m creating a passwordless GPG pair. Its absolutely not secure. This
avoids having to type a passphrase to decrypt your password files</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gpg --batch --passphrase <span style="color:#e6db74">&#39;&#39;</span> --quick-gen-key proton@proton.local default default
</span></span><span style="display:flex;"><span>gpg --list-keys
</span></span><span style="display:flex;"><span>pass init &lt;GPGID&gt;</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-10" class="outline-3">
<h3 id="headline-10">
Offline Imap (Downloading Emails) 
</h3>
<div id="outline-text-headline-10" class="outline-text-3">
<p>OfflineImap will be used to download the emails. Emacs will be used to send the
emails using its SMTP functionality</p>
<div id="outline-container-headline-11" class="outline-4">
<h4 id="headline-11">
Create Email Folder
</h4>
<div id="outline-text-headline-11" class="outline-text-4">
<p>
Create a folder to store your emails</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p ~/Mail/first@gmail.com</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-12" class="outline-4">
<h4 id="headline-12">
Create password decrypting script
</h4>
<div id="outline-text-headline-12" class="outline-text-4">
<p>
Create the following .offlineimap.py script. This will be used in the
.offlineimaprc to decrypt our password file</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;OEM &gt; ~/.offlineimap.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#! /usr/bin/env python
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from subprocess import check_output
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">def get_pass(account):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    return check_output(&#34;pass email/&#34; + account, bash=True).splitlines()[0]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">OEM</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-13" class="outline-4">
<h4 id="headline-13">
Create main configuration file
</h4>
<div id="outline-text-headline-13" class="outline-text-4">
<p>Now create the main configuration used to download the emails. The only thing
you need to replace is any reference to first@gmail.com</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;OEM &gt; ~/.offlineimaprc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[general]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">accounts = main, unix
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">maxsyncaccounts = 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">socktimeout = 60
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pythonfile = ~/.offlineimap.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ui = TTY.TTYUI
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Account main]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">localrepository = main-local
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remoterepository = gmail-remote
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Repository main-local]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">type = Maildir
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">localfolders = /home/user/Mail/first@gmail.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">nametrans = lambda folder: re.sub (&#39;important&#39;, &#39;^\[Gmail\].Important&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;all&#39;, &#39;[Gmail].All Mail&#39;       ,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;sent&#39;    , &#39;[Gmail].Sent Mail&#39; ,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;drafts&#39;  , &#39;[Gmail].Drafts&#39;    ,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           folder))))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">folderfilter = lambda folder: folder not in [&#39;important&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Repository gmail-remote]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">type = Gmail
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remoteuser = first@gmail.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remotepasseval = get_pass(&#34;first@gmail.com&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">nametrans = lambda folder: re.sub (&#39;^\[Gmail\].Important&#39;, &#39;important&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;.*All Mail$&#39;  , &#39;all&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;.*Sent Mail$&#39; , &#39;sent&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;.*Drafts$&#39;    , &#39;drafts&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           folder))))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">folderfilter = lambda folder: folder not in [&#39;[Gmail]/All Mail&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                             &#39;[Gmail]/Important&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                             &#39;[Gmail]/Starred&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sslcacertfile = /etc/ssl/certs/ca-certificates.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ssl_version = tls1_2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Account unix]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">localrepository = unix-local
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remoterepository = unix-remote
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Repository unix-local]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">type = Maildir
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">localfolders = /home/user/Mail/second@gmail.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">nametrans = lambda folder: re.sub (&#39;important&#39;, &#39;^\[Gmail\].Important&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;all&#39;, &#39;[Gmail].All Mail&#39;       ,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;sent&#39;    , &#39;[Gmail].Sent Mail&#39; ,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;drafts&#39;  , &#39;[Gmail].Drafts&#39;    ,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           folder))))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">folderfilter = lambda folder: folder not in [&#39;important&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Repository unix-remote]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">type = Gmail
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remoteuser = second@gmail.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remotepasseval = get_pass(&#34;second@gmail.com&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">nametrans = lambda folder: re.sub (&#39;^\[Gmail\].Important&#39;, &#39;important&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;.*All Mail$&#39;  , &#39;all&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;.*Sent Mail$&#39; , &#39;sent&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           re.sub(&#39;.*Drafts$&#39;    , &#39;drafts&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                           folder))))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">folderfilter = lambda folder: folder not in [&#39;[Gmail]/All Mail&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                             &#39;[Gmail]/Important&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                             &#39;[Gmail]/Starred&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sslcacertfile = /etc/ssl/certs/ca-certificates.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ssl_version = tls1_2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">OEM</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-14" class="outline-4">
<h4 id="headline-14">
Downloading and Indexing Emails
</h4>
<div id="outline-text-headline-14" class="outline-text-4">
<p>Run the following to commands. <code>offlineimap</code> is used to start the email
download. Mu will index the downloaded emails.</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>offlineimap
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mu init --maildir<span style="color:#f92672">=</span>~/Mail <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --my-address<span style="color:#f92672">=</span>first@gmail.com <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --my-address<span style="color:#f92672">=</span>second@gmail.com <span style="color:#960050;background-color:#1e0010">\</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-15" class="outline-3">
<h3 id="headline-15">
Configuring Emacs
</h3>
<div id="outline-text-headline-15" class="outline-text-3">
<p>At this point you would have installed the emacs mu4e package from source,
downloaded your emails to a folder, and lastly indexed it with Mu4e.</p>
<p>
Now its time to configure Emacs to show you emails in that folder. I won&#39;t
explain this configuration file. I&#39;ll leave this up to your responsibility.</p>
<p>
This configuration file will work with your email. I stripped out the
mu4e-folding and mu4e-thread packages from the config. They provide UI
improvements to Mu4e and the installation of these plugins are out of the scope
of this guide.</p>
<div id="outline-container-headline-16" class="outline-4">
<h4 id="headline-16">
Basic Config
</h4>
<div id="outline-text-headline-16" class="outline-text-4">
<div class="src src-emacs-lisp">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span><span style="color:#75715e">;; Load mu4e (Maildir email client for Emacs) if its directory exists</span>
</span></span><span style="display:flex;"><span>(when (<span style="color:#a6e22e">file-directory-p</span> <span style="color:#e6db74">&#34;/usr/local/share/emacs/site-lisp/mu4e&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Load mu4e and its contribution library</span>
</span></span><span style="display:flex;"><span>  (require <span style="color:#e6db74">&#39;mu4e</span>)
</span></span><span style="display:flex;"><span>  (require <span style="color:#e6db74">&#39;mu4e-contrib</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- Basic mu4e Configuration ---</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-maildir <span style="color:#e6db74">&#34;~/Mail&#34;</span>)               <span style="color:#75715e">; Root Maildir directory (where your emails are stored)</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-attachment-dir <span style="color:#e6db74">&#34;~/Downloads&#34;</span>)   <span style="color:#75715e">; Default directory for saving email attachments</span>
</span></span><span style="display:flex;"><span>  (setq message-kill-buffer-on-exit <span style="color:#66d9ef">t</span>)       <span style="color:#75715e">; Close the buffer after sending/canceling an email</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-compose-keep-self-cc <span style="color:#66d9ef">nil</span>)       <span style="color:#75715e">; Don&#39;t CC yourself when replying to your own emails</span>
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;mu4e-view-mode-hook</span> <span style="color:#a6e22e">#&#39;</span>visual-line-mode) <span style="color:#75715e">; Enable word wrapping in email view</span>
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;mu4e-compose-mode-hook</span> <span style="color:#a6e22e">#&#39;</span>(lambda () (auto-save-mode <span style="color:#ae81ff">1</span>))) <span style="color:#75715e">; Auto-save drafts</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- SMTP (Outgoing Mail) Settings ---</span>
</span></span><span style="display:flex;"><span>  (setq send-mail-function <span style="color:#e6db74">&#39;smtpmail-send-it</span>) <span style="color:#75715e">; Use `smtpmail` for sending emails</span>
</span></span><span style="display:flex;"><span>  (setq smtpmail-stream-type <span style="color:#e6db74">&#39;starttls</span>)      <span style="color:#75715e">; Use STARTTLS for secure SMTP connections</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- Email Display &amp; Rendering ---</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-html2text-command <span style="color:#e6db74">&#34;w3m -T text/html&#34;</span>) <span style="color:#75715e">; Convert HTML emails to plain text using `w3m`</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-headers-auto-update <span style="color:#66d9ef">t</span>)          <span style="color:#75715e">; Automatically refresh email headers</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-view-show-images <span style="color:#66d9ef">t</span>)             <span style="color:#75715e">; Display inline images in emails</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-use-fancy-chars <span style="color:#66d9ef">t</span>)              <span style="color:#75715e">; Use pretty symbols (e.g., arrows for threads)</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-headers-show-threads <span style="color:#66d9ef">t</span>)         <span style="color:#75715e">; Enable email threading in the headers view</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-view-fields <span style="color:#f92672">&#39;</span>(:from :to :subject :date :maildir :tags)) <span style="color:#75715e">; Fields to display in email view</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-view-hide-cited <span style="color:#66d9ef">t</span>)              <span style="color:#75715e">; Hide quoted text in email view by default</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- Composing Emails ---</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-compose-signature-auto-include <span style="color:#66d9ef">nil</span>) <span style="color:#75715e">; Don&#39;t auto-insert signature</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-compose-in-new-frame <span style="color:#66d9ef">t</span>)         <span style="color:#75715e">; Open compose window in a new frame</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-compose-dont-reply-to-self <span style="color:#66d9ef">t</span>)   <span style="color:#75715e">; Exclude self when replying to a mailing list</span>
</span></span><span style="display:flex;"><span>  (setq message-citation-line-function <span style="color:#e6db74">&#39;message-insert-formatted-citation-line</span>) <span style="color:#75715e">; Format email citations</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- Search &amp; Behavior ---</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-search-full <span style="color:#66d9ef">t</span>)                  <span style="color:#75715e">; Show all search results (no limit)</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-sent-messages-behavior <span style="color:#e6db74">&#39;delete</span>) <span style="color:#75715e">; Don&#39;t save sent emails (IMAP server handles this)</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-change-filenames-when-moving <span style="color:#66d9ef">t</span>) <span style="color:#75715e">; Required for `mbsync` compatibility</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-confirm-quit <span style="color:#66d9ef">nil</span>)               <span style="color:#75715e">; Don&#39;t ask for confirmation when quitting mu4e</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-index-cleanup <span style="color:#66d9ef">t</span>)      <span style="color:#75715e">; Remove stale entries</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-index-lazy-check <span style="color:#66d9ef">t</span>)   <span style="color:#75715e">; Only re-index if changed</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-index-updated-hook <span style="color:#66d9ef">nil</span>) <span style="color:#75715e">; Disable &#34;lazy indexing completed&#34; popup</span>
</span></span><span style="display:flex;"><span>  (advice-add <span style="color:#e6db74">&#39;mu4e--index-cleanup-finished-message</span> :override <span style="color:#a6e22e">#&#39;</span>ignore)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- Integration with Other Tools ---</span>
</span></span><span style="display:flex;"><span>  (setq mail-user-agent <span style="color:#e6db74">&#39;mu4e-user-agent</span>)    <span style="color:#75715e">; Set mu4e as the default email client in Emacs</span>
</span></span><span style="display:flex;"><span>  (setq mu4e-completing-read-function <span style="color:#e6db74">&#39;ivy-completing-read</span>) <span style="color:#75715e">; Use Ivy for autocompletion</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; --- UI &amp; Hooks ---</span>
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;minibuffer-setup-hook</span> (lambda () (setq mu4e-hide-index-messages <span style="color:#66d9ef">t</span>))) <span style="color:#75715e">; Hide mu4e logs in minibuffer</span>
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;minibuffer-exit-hook</span> (lambda () (setq mu4e-hide-index-messages <span style="color:#66d9ef">nil</span>)))) <span style="color:#75715e">; Restore logs after exiting minibuffer</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Email Syncing</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(setq mu4e-get-mail-command <span style="color:#e6db74">&#34;true&#34;</span>) <span style="color:#75715e">;; Don&#39;t set a mail fetch program. Rely on independant sync</span>
</span></span><span style="display:flex;"><span>(setq mu4e-update-interval <span style="color:#ae81ff">60</span>)             <span style="color:#75715e">; Check for new emails every 60 seconds</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defvar my/offlineimap-process <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Tracks the OfflineIMAP process to prevent multiple instances.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun my/async-offlineimap-sync ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Run OfflineIMAP asynchronously without blocking Emacs, but avoid multiple instances.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (unless my/offlineimap-process
</span></span><span style="display:flex;"><span>    (let ((timestamp (<span style="color:#a6e22e">current-time-string</span>))
</span></span><span style="display:flex;"><span>          (buf (<span style="color:#a6e22e">get-buffer-create</span> <span style="color:#e6db74">&#34;*offlineimap*&#34;</span>)))
</span></span><span style="display:flex;"><span>      (with-current-buffer buf
</span></span><span style="display:flex;"><span>        (read-only-mode <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        (<span style="color:#a6e22e">erase-buffer</span>)
</span></span><span style="display:flex;"><span>        (<span style="color:#a6e22e">insert</span> (<span style="color:#a6e22e">format</span> <span style="color:#e6db74">&#34;Starting OfflineIMAP sync at: %s\n&#34;</span> timestamp)))  <span style="color:#75715e">;; Insert timestamp into the buffer</span>
</span></span><span style="display:flex;"><span>      (setq my/offlineimap-process
</span></span><span style="display:flex;"><span>            (<span style="color:#a6e22e">start-process</span> <span style="color:#e6db74">&#34;offlineimap&#34;</span>
</span></span><span style="display:flex;"><span>                           buf
</span></span><span style="display:flex;"><span>                           <span style="color:#e6db74">&#34;offlineimap&#34;</span> <span style="color:#e6db74">&#34;-o&#34;</span>)))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun my/stop-offlineimap-sync ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Stop the OfflineIMAP process if it&#39;s running.&#34;</span>
</span></span><span style="display:flex;"><span>  (when my/offlineimap-process
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">delete-process</span> my/offlineimap-process)
</span></span><span style="display:flex;"><span>    (setq my/offlineimap-process <span style="color:#66d9ef">nil</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Run OfflineIMAP every 45 seconds, but only if it&#39;s not already running</span>
</span></span><span style="display:flex;"><span>(run-with-timer <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">45</span> <span style="color:#a6e22e">#&#39;</span>my/async-offlineimap-sync)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;mu4e-update-mail-hook</span> <span style="color:#a6e22e">#&#39;</span>mu4e-update-index)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Email Contexts</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">; This code handles which email accounts are visible in MU4E as well as configures</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">; context-aware keybindings for bookmarks.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(setq mu4e-contexts
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">list</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">;; Office account</span>
</span></span><span style="display:flex;"><span>       (make-mu4e-context
</span></span><span style="display:flex;"><span>        :name <span style="color:#e6db74">&#34;Office&#34;</span>
</span></span><span style="display:flex;"><span>        :match-func
</span></span><span style="display:flex;"><span>        (lambda (msg)
</span></span><span style="display:flex;"><span>          (when msg
</span></span><span style="display:flex;"><span>            (string-prefix-p <span style="color:#e6db74">&#34;/first@gmail.com&#34;</span> (mu4e-message-field msg :maildir))))
</span></span><span style="display:flex;"><span>        :vars <span style="color:#f92672">&#39;</span>((user-mail-address <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;first@gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                (<span style="color:#a6e22e">user-full-name</span>    <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;First Last&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-drafts-folder  <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/first@gmail.com/drafts&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-sent-folder    <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/first@gmail.com/sent&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-refile-folder  <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/first@gmail.com/[Gmail]/All Mail&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-trash-folder   <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/first@gmail.com/[Gmail].Trash&#34;</span>)
</span></span><span style="display:flex;"><span>                (smtpmail-smtp-server <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;smtp.gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                (smtpmail-smtp-service <span style="color:#f92672">.</span> <span style="color:#ae81ff">587</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">;; (mu4e-sent-messages-behavior . &#39;delete)</span>
</span></span><span style="display:flex;"><span>                (mu4e-compose-reply-ignore-address <span style="color:#f92672">.</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;no-?reply&#34;</span> <span style="color:#e6db74">&#34;first@gmail.com&#34;</span>))
</span></span><span style="display:flex;"><span>                (mu4e-maildir-shortcuts <span style="color:#f92672">.</span> ((<span style="color:#e6db74">&#34;/first@gmail.com/INBOX&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?i</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/first@gmail.com/sent&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?s</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/first@gmail.com/[Gmail].Trash&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?t</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/first@gmail.com/[Gmail].Spam&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?j</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/first@gmail.com/drafts&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?d</span>)))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">;; UnixFandom account</span>
</span></span><span style="display:flex;"><span>       (make-mu4e-context
</span></span><span style="display:flex;"><span>        :name <span style="color:#e6db74">&#34;Queztaz&#34;</span>
</span></span><span style="display:flex;"><span>        :match-func
</span></span><span style="display:flex;"><span>        (lambda (msg)
</span></span><span style="display:flex;"><span>          (when msg
</span></span><span style="display:flex;"><span>            (string-prefix-p <span style="color:#e6db74">&#34;/second@gmail.com&#34;</span> (mu4e-message-field msg :maildir))))
</span></span><span style="display:flex;"><span>        :vars <span style="color:#f92672">&#39;</span>((user-mail-address <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;second@gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                (<span style="color:#a6e22e">user-full-name</span>    <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;First Last&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-drafts-folder  <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/second@gmail.com/drafts&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-sent-folder    <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/second@gmail.com/sent&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-refile-folder  <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/second@gmail.com/[Gmail]/All Mail&#34;</span>)
</span></span><span style="display:flex;"><span>                (mu4e-trash-folder   <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/second@gmail.com/[Gmail].Trash&#34;</span>)
</span></span><span style="display:flex;"><span>                (smtpmail-smtp-server <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;smtp.gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                (smtpmail-smtp-service <span style="color:#f92672">.</span> <span style="color:#ae81ff">587</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">;; (mu4e-sent-messages-behavior . &#39;delete)</span>
</span></span><span style="display:flex;"><span>                (mu4e-compose-reply-ignore-address <span style="color:#f92672">.</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;no-?reply&#34;</span> <span style="color:#e6db74">&#34;second@gmail.com&#34;</span>))
</span></span><span style="display:flex;"><span>                (mu4e-maildir-shortcuts <span style="color:#f92672">.</span> ((<span style="color:#e6db74">&#34;/second@gmail.com/INBOX&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?u</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/second@gmail.com/sent&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?S</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/second@gmail.com/[Gmail].Trash&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?T</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/second@gmail.com/[Gmail].Spam&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?J</span>)
</span></span><span style="display:flex;"><span>                                           (<span style="color:#e6db74">&#34;/second@gmail.com/drafts&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">?D</span>)))))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defvar my/mu4e-bookmarks-by-context
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;Office&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">.</span> ((:name <span style="color:#e6db74">&#34;Inbox&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?i</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Unread&#34;</span> :query <span style="color:#e6db74">&#34;flag:unread and maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?u</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;All Mail&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/first@gmail.com/&#34;</span> :key <span style="color:#e6db74">?a</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Sent&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/first@gmail.com/sent&#34;</span> :key <span style="color:#e6db74">?s</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Drafts&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/first@gmail.com/drafts&#34;</span> :key <span style="color:#e6db74">?d</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Spam&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/first@gmail.com/[Gmail].Spam&#34;</span> :key <span style="color:#e6db74">?j</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Trash&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/first@gmail.com/[Gmail].Trash&#34;</span> :key <span style="color:#e6db74">?t</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Last 7 Days&#34;</span> :query <span style="color:#e6db74">&#34;date:7d..now and maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?7</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;PDFs&#34;</span> :query <span style="color:#e6db74">&#34;mime:application/pdf and maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?p</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Images&#34;</span> :query <span style="color:#e6db74">&#34;mime:image/* and maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?i</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;With Calendar Event&#34;</span> :query <span style="color:#e6db74">&#34;mime:text/calendar and maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?c</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;With Word Docs&#34;</span> :query <span style="color:#e6db74">&#34;mime:application/msword  OR mime:application/vnd.openxmlformats-officedocument.wordprocessingml.document and maildir:/first@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?w</span>)
</span></span><span style="display:flex;"><span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;Queztaz&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">.</span> ((:name <span style="color:#e6db74">&#34;Inbox&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?i</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Unread&#34;</span> :query <span style="color:#e6db74">&#34;flag:unread and maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?u</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;All Mail&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/second@gmail.com/&#34;</span> :key <span style="color:#e6db74">?a</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Sent&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/second@gmail.com/sent&#34;</span> :key <span style="color:#e6db74">?s</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Drafts&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/second@gmail.com/drafts&#34;</span> :key <span style="color:#e6db74">?d</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Spam&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/second@gmail.com/[Gmail].Spam&#34;</span> :key <span style="color:#e6db74">?j</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Trash&#34;</span> :query <span style="color:#e6db74">&#34;maildir:/second@gmail.com/[Gmail].Trash&#34;</span> :key <span style="color:#e6db74">?t</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;Last 7 Days&#34;</span> :query <span style="color:#e6db74">&#34;date:7d..now and maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?7</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;PDFs&#34;</span> :query <span style="color:#e6db74">&#34;mime:application/pdf and maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?p</span>)
</span></span><span style="display:flex;"><span>       (:name <span style="color:#e6db74">&#34;Images&#34;</span> :query <span style="color:#e6db74">&#34;mime:image/* and maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?i</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;With Calendar Event&#34;</span> :query <span style="color:#e6db74">&#34;mime:text/calendar and maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?c</span>)
</span></span><span style="display:flex;"><span>        (:name <span style="color:#e6db74">&#34;With Word Docs&#34;</span> :query <span style="color:#e6db74">&#34;mime:application/msword  OR mime:application/vnd.openxmlformats-officedocument.wordprocessingml.document and maildir:/second@gmail.com/INBOX&#34;</span> :key <span style="color:#e6db74">?w</span>)
</span></span><span style="display:flex;"><span>))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun my/update-mu4e-bookmarks-based-on-context (context-name)
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Update `mu4e-bookmarks` when switching context.&#34;</span>
</span></span><span style="display:flex;"><span>  (let ((bookmarks (<span style="color:#a6e22e">cdr</span> (<span style="color:#a6e22e">assoc</span> context-name my/mu4e-bookmarks-by-context))))
</span></span><span style="display:flex;"><span>    (when bookmarks
</span></span><span style="display:flex;"><span>      (setq mu4e-bookmarks bookmarks))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;mu4e-context-changed-hook</span>
</span></span><span style="display:flex;"><span>          (lambda ()
</span></span><span style="display:flex;"><span>            (my/update-mu4e-bookmarks-based-on-context
</span></span><span style="display:flex;"><span>             (mu4e-context-name (mu4e-context-current)))))</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-17" class="outline-4">
<h4 id="headline-17">
Creating .authinfo.gpg file
</h4>
<div id="outline-text-headline-17" class="outline-text-4">
<p>This file will contain your SMTP password used by emacs to send emails.</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>machine smtp.gmail.com login first@gmail.com password PASSWORDHERE port <span style="color:#ae81ff">587</span> 
</span></span><span style="display:flex;"><span>machine smtp.gmail.com login second@gmail.com password PASSWORDHERE port <span style="color:#ae81ff">587</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-18" class="outline-4">
<h4 id="headline-18">
Using Mu4e
</h4>
<div id="outline-text-headline-18" class="outline-text-4">
<p>
Evaluate the code blocks above and launch Mu4e</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>M-x mu4e</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

  </article>
</main>

</body>
</html>
