{{ define "main" }}
<main>
  <style>
    .toc ul {
	list-style-type: none;
	padding-left: 1rem;
    }
    .toc li {
	margin: 0.25rem 0;
	cursor: pointer;
    }
    .toc li ul {
	display: none; /* hide nested lists by default */
	margin-left: 1rem;
    }
    .toc li.open > ul {
	display: block; /* show when expanded */
    }
    .toc li > span {
	font-weight: bold;
	display: inline-block;
    }
  </style>
<script>
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll(".toc li").forEach(function (li) {
    const subList = li.querySelector("ul");
    if (subList) {
      // Create toggle button
      const toggle = document.createElement("span");
      toggle.textContent = "▸";
      toggle.style.cursor = "pointer";
      toggle.style.marginRight = "0.4em";

      // Insert before the anchor
      const firstChild = li.firstElementChild;
      li.insertBefore(toggle, firstChild);

      // Hide sublist initially
      subList.style.display = "none";

      toggle.addEventListener("click", function (e) {
        e.stopPropagation(); // don’t trigger anchor
        if (subList.style.display === "none") {
          subList.style.display = "block";
          toggle.textContent = "▾";
        } else {
          subList.style.display = "none";
          toggle.textContent = "▸";
        }
      });
    }
  });
});
</script>

  <div style="margin: 1rem;">
    <a href="/" style="
      display: inline-block;
      background-color: #eee;
      color: #333;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      font-family: sans-serif;
      font-size: 0.9rem;
    ">
      ← Homepage
    </a>

  {{ $section := .Section }}
  <title>{{ upper (substr $section 0 1) }}{{ substr $section 1 }}/{{ .Title }}</title>
  <h1>{{ .Title }}</h1>

  </div>
  <nav class="toc">
    {{ .TableOfContents }}
  </nav> 

  <article>
    {{ .Content }}
  </article>
</main>
{{ end }}
